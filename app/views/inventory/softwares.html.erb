<%= render :partial => 'top_menu' %>
<h2><%= l('inventory_softwares') %></h2>
<% if @has_permission %> 
 <div class="box">
    <h3 style='cursor:pointer;' onclick='$("#ip_create_form").toggle();'>
    <% if params[:edit] %><%= l('Edit') %><% else %><%= l('Create') %><% end%> <%= l('Software') %>
    </h3>
    <div id='ip_create_form' <% if not params[:edit] and not params[:create] %>style='display:none;'<% end %>>
      <%= render :partial => 'software_form' %>
    </div>
  </div>
<% end %>

<table style='font-size:10px;border-collapse:collapse;'>
  <tr>
    <th>id#</th>
    <th><%= l('field_name') %></th>
    <th><%= l('field_product_key') %></th>
    <th><%= l('field_expiry_date') %></th>
    <th><%= l('field_installed_device') %></th>
  </tr>
  <% @softwares.each do |p| %>
  <tr>
    <td><%= p.id %></td>
    <td><%= p.name %></td>
    <td><%= p.product_key %></td>
    <td><%= p.expiry_date.to_date %></td>
    <td><%= InventoryPart.find(p.installed_device_id).part_number %></td>
  <% if @has_permission %> 
    <td><%= link_to image_tag('edit.png'), 'softwares?edit='+p.id.to_s %></td>
    <td><%= link_to image_tag('delete.png'), 'softwares?delete='+p.id.to_s, :confirm => l('delete_confirmation') %></td>
  <% end %>
  </tr>
  <% end %>
</table>